<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        ::before, ::after, * {
            box-sizing: border-box;
        }
        body {
            padding: 0;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        table {
            /* height: 500px;
            width: 300px; */
            border-collapse: collapse;
        }
        tr, td {
            border: 1px solid;
        }
        td {
            text-align: center;
        }
        input[type="text"] {
            width: 100%;
            height: 60px;
            font-size: 30px;
            text-align: end;
        }
        button {
            font-size: 30px;
            display: inline-block;
            border: 0;
            width: 75px;
            height: 75px;
            border-radius: 0;
        }
        #calculate {
            background-color:hsl(199, 71%, 66%);
        }
        #calculate:hover {
            background-color: hsl(199, 46%, 51%);
        }
    </style>
</head>
<body>
    <table>
        <tr>
            <td colspan="4">
                <input type="text" id="previous-calc" value="" disabled>
            </td>
        </tr>
        <tr>
            <td colspan="4">
                <input type="text" id="result" value="0" disabled>
            </td>
        </tr>
        <tr>
            <td><button id="seven">7</button></td>
            <td><button id="eight">8</button></td>
            <td><button id="nine">9</button></td>
            <td><button id="divide">/</button></td>
        </tr>
        <tr>
            <td><button id="four">4</button></td>
            <td><button id="five">5</button></td>
            <td><button id="six">6</button></td>
            <td><button id="multi">*</button></td>
        </tr>
        <tr>
            <td><button id="one">1</button></td>
            <td><button id="two">2</button></td>
            <td><button id="three">3</button></td>
            <td><button id="minus">-</button></td>
        </tr>
        <tr>
            <td><button id="reset">C</button></td>
            <td><button id="zero">0</button></td>
            <td><button id="calculate">=</button></td>
            <td><button id="add">+</button></td>
        </tr>
    </table>
</body>
<script>
    let result = document.getElementById("result");

    // button define
    let oneBtn = document.getElementById("one");
    let twoBtn = document.getElementById("two");
    let threeBtn = document.getElementById("three");
    let fourBtn = document.getElementById("four");
    let fiveBtn = document.getElementById("five");
    let sixBtn = document.getElementById("six");
    let sevenBtn = document.getElementById("seven");
    let eightBtn = document.getElementById("eight");
    let nineBtn = document.getElementById("nine");
    let zeroBtn = document.getElementById("zero");
    let calculateBtn = document.getElementById("calculate");
    let addBtn =  document.getElementById("add");
    let minusBtn = document.getElementById("minus");
    let multiBtn = document.getElementById("multi");
    let divideBtn = document.getElementById("divide");
    let resetBtn = document.getElementById("reset");
    let previousCalc = document.getElementById("previous-calc");

    // temp variable to save result
    let temp;
    
    // button call event, number use arrow function
    oneBtn.addEventListener("click", () => {
        // return operator in previous input
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");

        // check if operatorStr is number or empty string or not
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            // if result value (input 2) equal 0, assign "1" for result value. Else concat current result value with "1" 
            result.value == "0" ? result.value = "1" : result.value += "1";
        // operatorStr is operator
        } else {
            if(result.value == "0") {
                result.value = "1";
            }else {
                if(operatorStr == "="){
                    result.value = "1";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "1";
                }
            }            
        } 
    });
    twoBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "2" : result.value += "2";
        }else{
            if(result.value == "0") {
                result.value = "2";
            }else {
                if(operatorStr == "="){
                    result.value = "2";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "2";
                }
            }            
        }
    });
    threeBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "3" : result.value += "3";
        }else{
            if(result.value == "0") {
                result.value = "3";
            }else {
                if(operatorStr == "="){
                    result.value = "3";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "3";
                }
            }            
        }
    });
    fourBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "4" : result.value += "4";
        }else{
            if(result.value == "0") {
                result.value = "4";
            }else {
                if(operatorStr == "="){
                    result.value = "4";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "4";
                }
            }            
        }
    });
    fiveBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "5" : result.value += "5";
        }else{
            if(result.value == "0") {
                result.value = "5";
            }else {
                if(operatorStr == "="){
                    result.value = "5";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "5";
                }
            }            
        }
    });
    sixBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "6" : result.value += "6";
        }else{
            if(result.value == "0") {
                result.value = "6";
            }else {
                if(operatorStr == "="){
                    result.value = "6";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "6";
                }
            }            
        }
    });
    sevenBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "7" : result.value += "7";
        }else{
            if(result.value == "0") {
                result.value = "7";
            }else {
                if(operatorStr == "="){
                    result.value = "7";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "7";
                }
            }            
        }
    });
    eightBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "8" : result.value += "8";
        }else{
            if(result.value == "0") {
                result.value = "8";
            }else {
                if(operatorStr == "="){
                    result.value = "8";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "8";
                }
            }            
        }
    });
    nineBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "9" : result.value += "9";
        }else{
            if(result.value == "0") {
                result.value = "9";
            }else {
                if(operatorStr == "="){
                    result.value = "9";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "9";
                }
            }            
        }
    });
    zeroBtn.addEventListener("click", () => {
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(/[0-9]/.test(operatorStr)||operatorStr==""){
            result.value == "0" ? result.value = "0" : result.value += "0";
        }else{
            if(result.value == "0") {
                result.value = "0";
            }else {
                if(operatorStr == "="){
                    result.value = "0";
                    previousCalc.value = "";
                    temp = undefined;
                }else{
                    result.value += "0";
                }
            }            
        }
    });
    minusBtn.addEventListener("click", minusFunction);
    addBtn.addEventListener("click", addFunction);
    multiBtn.addEventListener("click", multiFunction);
    divideBtn.addEventListener("click", divideFunction);
    resetBtn.addEventListener("click", resetFunction);
    calculateBtn.addEventListener("click", calculateFunction);

    // function
    function resetFunction(){
        result.value = "0";
        temp = undefined;
        previousCalc.value = "";
    }

    function addFunction(){
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(temp == undefined){
            temp = +result.value;
            previousCalc.value += result.value + "+";
            result.value = "0";
        } else {
            switch (operatorStr) {
                case "=":
                    previousCalc.value = temp + "+";
                    result.value = "0";
                    break;
                case "+":
                    temp += +result.value;
                    previousCalc.value = temp + "+";
                    result.value = "0";
                    break;
                case "-":
                    temp -= +result.value;
                    previousCalc.value = temp + "+";
                    result.value = "0";
                    break;
                case "*":
                    temp *= +result.value;
                    previousCalc.value = temp + "+";
                    result.value = "0";
                    break;
                case "/":
                    temp /= +result.value;
                    previousCalc.value = temp + "+";
                    result.value = "0";
                    break;
            }
        }
    }

    function minusFunction(){
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(temp == undefined){
            temp = +result.value;
            previousCalc.value += result.value + "-";
            result.value = "0";
        }else {
            switch (operatorStr) {
                case "=":
                    previousCalc.value = temp + "-";
                    result.value = "0";
                    break;
                case "+":
                    temp += +result.value;
                    previousCalc.value = temp + "-";
                    result.value = "0";
                    break;
                case "-":
                    temp -= +result.value;
                    previousCalc.value = temp + "-";
                    result.value = "0";
                    break;
                case "*":
                    temp *= +result.value;
                    previousCalc.value = temp + "-";
                    result.value = "0";
                    break;
                case "/":
                    temp /= +result.value;
                    previousCalc.value = temp + "-";
                    result.value = "0";
                    break;
            }
        }
    }

    function multiFunction(){
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(temp == undefined){
            temp = +result.value;
            previousCalc.value += result.value + "*";
            result.value = "0";
        }else {
            switch (operatorStr) {
                case "=":
                    previousCalc.value = temp + "*";
                    result.value = "0";
                    break;
                case "+":
                    temp += +result.value;
                    previousCalc.value = temp + "*";
                    result.value = "0";
                    break;
                case "-":
                    temp -= +result.value;
                    previousCalc.value = temp + "*";
                    result.value = "0";
                    break;
                case "*":
                    temp *= +result.value;
                    previousCalc.value = temp + "*";
                    result.value = "0";
                    break;
                case "/":
                    temp /= +result.value;
                    previousCalc.value = temp + "*";
                    result.value = "0";
                    break;
            }
        }
    }
    
    function divideFunction(){
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(temp == undefined){
            temp = +result.value;
            previousCalc.value += result.value + "/";
            result.value = "0";
        }else {
            switch (operatorStr) {
                case "=":
                    previousCalc.value = temp + "/";
                    result.value = "0";
                    break;
                case "+":
                    temp += +result.value;
                    previousCalc.value = temp + "/";
                    result.value = "0";
                    break;
                case "-":
                    temp -= +result.value;
                    previousCalc.value = temp + "/";
                    result.value = "0";
                    break;
                case "*":
                    temp *= +result.value;
                    previousCalc.value = temp + "/";
                    result.value = "0";
                    break;
                case "/":
                    temp /= +result.value;
                    previousCalc.value = temp + "/";
                    result.value = "0";
                    break;
            }
        }
    }
    
    function calculateFunction(){
        let operatorStr = previousCalc.value.split("").filter((ele, index, arr) => index == arr.length-1).join("");
        if(operatorStr==""){

        }else{
            if(/[0-9]/.test(operatorStr)){

            }else{
                switch (operatorStr) {
                    case "+":
                        previousCalc.value += result.value + "=";
                        temp += parseInt(result.value);
                        result.value = temp;
                        break;
                    case "-":
                        previousCalc.value += result.value + "=";
                        temp -= parseInt(result.value);
                        result.value = temp;
                        break;
                    case "*":
                        previousCalc.value += result.value + "=";
                        temp *= parseInt(result.value);
                        result.value = temp;
                        break;
                    case "/":
                        previousCalc.value += result.value + "=";
                        temp /= parseInt(result.value);
                        result.value = temp;
                        break;
                }
            }
        }     
        // console.log("temp after click = is " + temp);
    }
</script>
</html>